(self.webpackJsonp=self.webpackJsonp||[]).push([[12],{2703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(0),r=n(79),o=y(n(6)),i=n(14),s=n(11),c=n(43),l=n(25),d=n(7),u=n(9),p=n(8),f=n(2766),m=y(n(2779)),h=n(2780),g=n(4);function y(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{SCREEN_XS:w}=d.BREAK_POINTS,x=o.default.div.withConfig({displayName:"InteractWithContractsFlow__Heading",componentId:"d8ohw9-0"})(["width:100%;display:flex;justify-content:space-between;margin-bottom:10px;align-items:center;@media (max-width:","){flex-direction:column;align-items:stretch;}"],w),_=o.default.div.withConfig({displayName:"InteractWithContractsFlow__TabsWrapper",componentId:"d8ohw9-1"})(["margin-top:8px;width:fit-content;"]);var T=()=>{const[e,t]=(0,a.useState)(0),{networks:n}=(0,c.useNetworks)(),o=(0,l.useSelector)((0,l.getDefaultAccount)()),d=b(b({},h.interactWithContractsInitialState),{},{account:o,network:(0,c.getNetworkById)(s.DEFAULT_NETWORK,n)}),{interactWithContractsState:y,handleNetworkSelected:C,handleContractSelected:O,handleContractAddressChanged:w,handleAddressOrDomainChanged:T,handleAbiChanged:I,handleCustomContractNameChanged:S,updateNetworkContractOptions:v,displayGeneratedForm:j,handleInteractionFormSubmit:N,handleInteractionFormWriteSubmit:A,handleAccountSelected:R,handleTxSigned:E,handleSaveContractSubmit:P,handleGasSelectorChange:F,handleGasLimitChange:D,handleNonceChange:k,handleDeleteContract:L}=(0,p.useStateReducer)(h.InteractWithContractsFactory,d),{account:G}=y,W=(0,r.useHistory)(),M=(0,r.useLocation)(),B=()=>{t(e+1)},U=e=>{W.push(e)},H=[{title:(0,u.translateRaw)("CONTRACTS_INTERACT"),path:s.ROUTE_PATHS.INTERACT_WITH_CONTRACTS.path,onClick:()=>U(s.ROUTE_PATHS.INTERACT_WITH_CONTRACTS.path)},{title:(0,u.translateRaw)("CONTRACTS_DEPLOY"),path:s.ROUTE_PATHS.DEPLOY_CONTRACTS.path,onClick:()=>U(s.ROUTE_PATHS.DEPLOY_CONTRACTS.path)}],V=H.find(e=>e.path===M.pathname),z=[{title:(0,u.translateRaw)("NEW_HEADER_TEXT_14"),component:f.Interact,props:y,actions:{handleNetworkSelected:C,handleContractSelected:O,handleContractAddressChanged:w,handleAddressOrDomainChanged:T,handleAbiChanged:I,handleCustomContractNameChanged:S,updateNetworkContractOptions:v,displayGeneratedForm:j,handleInteractionFormSubmit:N,handleSaveContractSubmit:P,handleInteractionFormWriteSubmit:e=>A(e,B),handleAccountSelected:R,handleGasSelectorChange:F,handleDeleteContract:L,handleGasLimitChange:D,handleNonceChange:k}},{title:(0,u.translateRaw)("CONFIRM_TX_MODAL_TITLE"),component:m.default,props:(({txConfig:e})=>({txConfig:e}))(y),actions:{goToNextStep:B}},{title:(0,u.translateRaw)("INTERACT_SIGN_WRITE"),component:G&&i.WALLET_STEPS[G.wallet],props:(({txConfig:e})=>({network:G&&G.network,senderAccount:G,rawTransaction:null==e?void 0:e.rawTransaction}))(y),actions:{onSuccess:e=>E(e,B)}},{title:(0,u.translateRaw)("INTERACT_RECEIPT"),component:f.InteractionReceipt,props:(({txConfig:e,txReceipt:t})=>({txConfig:e,txReceipt:t}))(y),actions:{goToFirstStep:()=>{t(0)}}}],$=z[e],K=$.component,Y=$.props,J=$.actions;return(0,g.jsx)(i.ExtendedContentPanel,{onBack:()=>{0===e?W.push(s.ROUTE_PATHS.DASHBOARD.path):t(e-1)},stepper:{current:e+1,total:z.length},width:"750px",heading:(0,g.jsxs)(x,{children:[$.title,(0,g.jsx)(_,{children:(0,g.jsx)(i.Tabs,{tabs:H,selectedIndex:H.findIndex(e=>e.path===V.path)})})]}),children:(0,g.jsx)(K,b(b({},Y),J))})};t.default=T},2719:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.constructGasCallProps=t.reduceInputParams=t.getFunctionsFromABI=t.setFunctionOutputValues=t.generateFunctionFieldsDisplayNames=t.isPayable=t.isReadOperation=void 0;var a=n(97),r=l(n(1126)),o=l(n(450)),i=n(1129),s=n(8),c=n(2770);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.isReadOperation=e=>{const{stateMutability:t}=e;return t?t===c.StateMutabilityType.PURE||t===c.StateMutabilityType.VIEW:!!e.constant};t.isPayable=e=>{const{stateMutability:t}=e;return t?t===c.StateMutabilityType.PAYABLE:!!e.payable};t.generateFunctionFieldsDisplayNames=e=>{const t=(0,r.default)(e);return t.inputs.forEach((e,t)=>{e.displayName||(""===e.name?(e.name=t.toString(),e.displayName="Input#"+t):e.displayName=e.name)}),t.outputs.forEach((e,t)=>{e.displayName||(""===e.name?(e.name=t.toString(),e.displayName="Output#"+t):e.displayName=e.name)}),t.payAmount="0",t};t.setFunctionOutputValues=(t,n)=>{const o=(0,r.default)(t);return o.outputs.forEach(t=>{let r=n[t.name];e.isBuffer(r)&&(r=(0,a.bufferToHex)(r)),t.value=r}),o};t.getFunctionsFromABI=e=>(0,o.default)(e.filter(e=>e.type===c.ABIItemType.FUNCTION),e=>e.name.toLowerCase()).map(e=>u(u({},e),{},{label:e.name}));const f=e=>e.inputs.reduce((e,t)=>{let n=t.value;return n&&["[","]"].every(e=>t.type.includes(e))&&(n=JSON.parse(n)),u(u({},e),{},{[t.name]:t.value})},{});t.reduceInputParams=f;t.constructGasCallProps=(e,t,n)=>{try{const{encodeInput:a}=new i.AbiFunction(t,[]),r=a(f(t));return{from:n.address,to:e,value:(0,s.inputValueToHex)(t.payAmount),data:r}}catch{return{}}}}).call(this,n(12).Buffer)},2720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fieldName:t,fieldType:n,isOutput:a}=e;return(0,s.jsxs)(l,{children:[(0,s.jsxs)("b",{children:[a&&"â†³ ",t]}),n&&(0,s.jsx)(d,{children:n})]})};var a,r=(a=n(6))&&a.__esModule?a:{default:a},o=n(14),i=n(7),s=n(4);const{GREY:c}=i.COLORS,l=r.default.div.withConfig({displayName:"FieldLabel__Wrapper",componentId:"sc-1nixyzl-0"})(["display:flex;align-items:center;font-size:1em;"]),d=(0,r.default)(o.Typography).withConfig({displayName:"FieldLabel__LabelWraper",componentId:"sc-1nixyzl-1"})(["margin-left:6px;opacity:0.9;color:",";"],c)},2723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customContract=t.CUSTOM_CONTRACT_ADDRESS=void 0;var a=n(11);t.CUSTOM_CONTRACT_ADDRESS="custom";const r={name:"Custom",networkId:a.DEFAULT_NETWORK,address:"custom",abi:""};t.customContract=r},2766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Interact",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"InteractionReceipt",{enumerable:!0,get:function(){return r.default}});var a=o(n(2767)),r=o(n(2778));function o(e){return e&&e.__esModule?e:{default:e}}},2767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(0),r=n(329),o=n(79),i=C(n(6)),s=n(330),c=n(14),l=n(11),d=n(33),u=n(7),p=n(9),f=n(8),m=n(2723),h=n(2768),g=C(n(2769)),y=n(4);function C(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{BLUE_BRIGHT:x,WHITE:_,BLUE_LIGHT:T}=u.COLORS,{SCREEN_SM:I}=u.BREAK_POINTS,S=i.default.div.withConfig({displayName:"Interact__NetworkSelectorWrapper",componentId:"cu9fld-0"})(["margin-bottom:12px;label{font-weight:normal;}"]),v=i.default.div.withConfig({displayName:"Interact__ContractSelectionWrapper",componentId:"cu9fld-1"})(["display:flex;flex-direction:column;width:100%;"]),j=i.default.div.withConfig({displayName:"Interact__FieldWrapper",componentId:"cu9fld-2"})(["display:flex;flex-direction:column;margin-top:12px;flex:1;p{font-size:1em;}"]),N=i.default.div.withConfig({displayName:"Interact__Label",componentId:"cu9fld-3"})(["line-height:1;margin-bottom:9px;"]),A=i.default.div.withConfig({displayName:"Interact__InputWrapper",componentId:"cu9fld-4"})(["width:100%;display:flex;align-items:center;"]),R=i.default.div.withConfig({displayName:"Interact__ButtonWrapper",componentId:"cu9fld-5"})(["width:100%;display:flex;justify-content:left;"]),E=i.default.div.withConfig({displayName:"Interact__SaveContractWrapper",componentId:"cu9fld-6"})(["width:100%;display:flex;justify-content:space-between;@media (max-width:","){flex-direction:column;}"],I),P=i.default.div.withConfig({displayName:"Interact__SaveButtonWrapper",componentId:"cu9fld-7"})(["width:310px;display:flex;align-items:center;padding-top:10px;padding-left:8px;justify-content:flex-end;@media (max-width:","){justify-content:flex-start;padding-left:0px;padding-bottom:8px;}"],I),F=i.default.div.withConfig({displayName:"Interact__ErrorWrapper",componentId:"cu9fld-8"})(["margin-bottom:12px;"]),D=i.default.div.withConfig({displayName:"Interact__ContractSelectLabelWrapper",componentId:"cu9fld-9"})(["display:flex;justify-content:space-between;"]),k=(0,i.default)(N).withConfig({displayName:"Interact__DeleteLabel",componentId:"cu9fld-10"})(["color:",";cursor:pointer;"],x),L=(0,s.object)().shape({address:(0,s.object)({value:(0,s.string)().test("check-eth-address",(0,p.translateRaw)("TO_FIELD_ERROR"),e=>(0,d.isValidETHAddress)(e)||(0,d.isValidENSName)(e))}).required((0,p.translateRaw)("REQUIRED"))});var G=(0,o.withRouter)((function(e){const{network:t,contractAddress:n,abi:o,contract:i,contracts:s,showGeneratedForm:u,handleNetworkSelected:C,handleContractSelected:b,handleAddressOrDomainChanged:w,handleAbiChanged:x,handleCustomContractNameChanged:I,updateNetworkContractOptions:N,displayGeneratedForm:G,handleInteractionFormSubmit:W,account:M,customContractName:B,handleAccountSelected:U,handleInteractionFormWriteSubmit:H,handleSaveContractSubmit:V,nonce:z,gasLimit:$,gasPrice:K,maxFeePerGas:Y,maxPriorityFeePerGas:J,handleGasSelectorChange:X,handleDeleteContract:Q,handleGasLimitChange:q,handleNonceChange:Z}=e,[ee,te]=(0,a.useState)(void 0),[ne,ae]=(0,a.useState)(!1),[re,oe]=(0,a.useState)(!1),[ie,se]=(0,a.useState)(!1),[ce,le]=(0,a.useState)(!1),[de,ue]=(0,a.useState)({}),{networks:pe}=(0,d.useNetworks)(),{networkIdFromUrl:fe,addressFromUrl:me,functionFromUrl:he,inputsFromUrl:ge}=(0,h.getParsedQueryString)(e.location.search),ye=t.id===fe&&(0,f.isSameAddress)(n,me);(0,a.useEffect)(()=>{N(),le(!1)},[t]),(0,a.useEffect)(()=>{G(!1),le(!1),re&&ye&&!ie&&(be(),ue(O(O({},de),{},{functionName:he,inputs:ge})))},[o]);const Ce=()=>{te(void 0);try{V()}catch(e){te(e.message)}},be=()=>{te(void 0);try{G(!0),le(!0)}catch(e){te(e.message)}},Oe=e=>{try{return JSON.parse(e)}catch(e){return[]}};(0,a.useEffect)(()=>{(0,d.getNetworkById)(fe,pe)?C(fe):fe&&te((0,p.translateRaw)("INTERACT_ERROR_INVALID_NETWORK"))},[]);const we=i&&(0,f.isSameAddress)(i.address,m.CUSTOM_CONTRACT_ADDRESS);return(0,y.jsx)(r.Formik,{initialValues:{address:{display:"",value:""}},validationSchema:L,onSubmit:()=>{},children:({values:e,errors:r,touched:f,setFieldValue:h,setFieldError:O,setFieldTouched:N,resetForm:L})=>((0,a.useEffect)(()=>{(0,d.getNetworkById)(fe,pe)&&!re&&0!==s.length&&me&&(me&&w(me),oe(!0))},[s]),(0,a.useEffect)(()=>{i&&i.networkId!==t.id&&w(n),i&&i.address!==m.CUSTOM_CONTRACT_ADDRESS&&h("address",{display:i.name,value:i.address}),te(void 0)},[i]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S,{children:(0,y.jsx)(c.NetworkSelector,{network:t.id,onChange:e=>{C(e),L()}})}),(0,y.jsx)(v,{children:(0,y.jsxs)(j,{children:[(0,y.jsxs)(D,{children:[(0,y.jsx)("label",{htmlFor:"address",className:"input-group-header",children:(0,p.translateRaw)("CONTRACT_TITLE")}),i&&i.isCustom&&(0,y.jsx)(k,{onClick:()=>Q(i.uuid),children:(0,p.translateRaw)("ACTION_15")})]}),(0,y.jsx)(c.ContractLookupField,{name:"address",contracts:s,error:r&&f.address&&r.address&&r.address.value,network:t,isResolvingName:ne,setIsResolvingDomain:ae,onSelect:e=>{b(e),w(e.value)},onChange:e=>w(e),value:e.address,setFieldValue:h,setFieldTouched:N,setFieldError:O})]})}),(0,y.jsxs)(j,{children:[(0,y.jsx)(A,{onClick:()=>le(!1),children:(0,y.jsx)(c.InputField,{name:"abi",label:(0,y.jsxs)(y.Fragment,{children:[(0,p.translateRaw)("CONTRACT_JSON"),(0,y.jsx)(c.LinkApp,{href:(0,l.getKBHelpArticle)(l.KB_HELP_ARTICLE.WHAT_IS_CONTRACT_ABI),isExternal:!0,children:(0,y.jsx)(c.Icon,{width:"16px",type:"questionBlack"})})]}),value:o,placeholder:'[{"type":"constructor","inputs":[{"name":"param1","type":"uint256","indexed":true}],"name":"Event"},{"type":"function","inputs":[{"name":"a","type":"uint256"}],"name":"foo","outputs":[]}]',onChange:({target:{value:e}})=>{x(e),se(!0)},textarea:!0,resizableTextArea:!0,height:"108px",maxHeight:ce?"108px":"none",disabled:!we})}),we&&(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(E,{children:[(0,y.jsx)(c.InputField,{label:(0,p.translateRaw)("CONTRACT_NAME"),value:B,placeholder:(0,p.translateRaw)("CONTRACT_NAME_PLACEHOLDER"),onChange:({target:{value:e}})=>I(e)}),(0,y.jsx)(P,{children:(0,y.jsx)(c.Button,{color:T,large:!1,secondary:!0,onClick:Ce,children:(0,p.translateRaw)("SAVE_CONTRACT")})})]})}),ee&&(0,y.jsx)(F,{children:(0,y.jsx)(c.InlineMessage,{children:ee})})]}),(0,y.jsx)(R,{children:(0,y.jsx)(c.Button,{color:_,disabled:ce,onClick:be,fullwidth:!0,children:(0,p.translateRaw)("INTERACT_WITH_CONTRACT")})}),u&&o&&(0,y.jsx)(g.default,{abi:Oe(o),handleInteractionFormSubmit:W,account:M,handleAccountSelected:U,handleInteractionFormWriteSubmit:H,network:t,handleGasSelectorChange:X,contractAddress:n,interactionDataFromURL:de,nonce:z,gasLimit:$,gasPrice:K,maxFeePerGas:Y,maxPriorityFeePerGas:J,handleNonceChange:Z,handleGasLimitChange:q})]}))})}));t.default=G},2768:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedQueryString=void 0;var a=n(660);t.getParsedQueryString=e=>{const{network:t,address:n,function:r,input:o}=(0,a.parse)(e);return{networkIdFromUrl:t,addressFromUrl:n,functionFromUrl:r,inputsFromUrl:(o?Array.isArray(o)?o:[o]:[]).map(e=>({name:e.includes(":")?e.substr(0,e.indexOf(":")):"",value:e.includes(":")?e.substr(e.indexOf(":")+1,e.length):""}))}}},2769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({abi:e,handleInteractionFormSubmit:t,account:n,network:r,nonce:f,gasLimit:m,gasPrice:h,maxFeePerGas:y,maxPriorityFeePerGas:C,contractAddress:A,handleAccountSelected:R,handleInteractionFormWriteSubmit:E,handleGasSelectorChange:P,handleNonceChange:F,handleGasLimitChange:D,interactionDataFromURL:k}){const[L,G]=(0,a.useState)(!1),[W,M]=(0,a.useState)(void 0),[B,U]=(0,a.useState)(void 0),[H,V]=(0,a.useState)({}),[z,$]=(0,a.useState)(!1),K=(0,c.getFunctionsFromABI)(e),Y=()=>{n&&W&&V((0,c.constructGasCallProps)(A,W,n))};(0,a.useEffect)(Y,[n]);const J=e=>{if(!e)return;const t=(0,c.generateFunctionFieldsDisplayNames)(e);M(t),U(void 0),(0,c.isReadOperation)(t)&&0===t.inputs.length&&Q(t)},X=(e,t)=>{const n=Object.assign({},W),a=n.inputs.findIndex(t=>t.name===e);n.inputs[a]&&(n.inputs[a].value=t),M(n)},Q=async e=>{if(e){U(void 0);try{G(!0);const n=await t(e),a=(0,c.setFunctionOutputValues)(e,n);M(a)}catch(e){U(e.reason?e.reason:e.message)}finally{G(!1)}}};let q=!0,Z=[],ee=[];void 0!==W&&(q=(0,c.isReadOperation)(W),Z=W.inputs,ee=W.outputs);const{functionName:te,inputs:ne}=k,ae=K.find(e=>e.name===te);ae&&!W&&J(ae);return(0,a.useEffect)(()=>{!z&&W&&te===W.name&&(ne.forEach(e=>{X(e.name,e.value)}),$(!0),q&&W.inputs.every(e=>e.value)&&Q(W))},[W]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(S,{}),(0,p.jsxs)(O,{children:[(0,p.jsx)(x,{children:(0,s.translateRaw)("CONTRACT_INTERACT_TITLE")}),(0,p.jsx)(o.Selector,{value:W,options:K,onChange:e=>{J(e)},optionComponent:({data:e,selectOption:t})=>(0,p.jsx)(d.default,{option:e,onSelect:t,paddingLeft:i.SPACING.SM}),valueComponent:({value:e})=>(0,p.jsx)(d.default,{option:e}),searchable:!0})]}),(0,p.jsx)(I,{children:W&&(0,p.jsxs)(p.Fragment,{children:[Z.length>0&&(0,p.jsx)("div",{children:Z.map((e,t)=>(0,p.jsx)(w,{children:"bool"===e.type?(0,p.jsx)(l.BooleanSelector,{fieldName:e.name,fieldType:e.type,fieldDisplayName:e.displayName,handleInputChange:X,value:e.value}):(0,p.jsx)(o.InputField,{name:e.name,label:(0,p.jsx)(l.FieldLabel,{fieldName:e.displayName,fieldType:e.type}),value:e.value,onChange:({target:{value:t}})=>X(e.name,t),validate:Y})},`${e.displayName}${t}${W.name}`))}),q&&(0,p.jsx)("div",{children:ee.map((e,t)=>(0,p.jsx)(w,{isOutput:!0,children:void 0!==e.value&&"bool"===e.type?(0,p.jsx)(l.BooleanOutputField,{fieldName:e.displayName,fieldType:e.type,fieldValue:e.value}):(0,p.jsx)(o.InputField,{label:(0,p.jsx)(l.FieldLabel,{fieldName:e.displayName,fieldType:e.type,isOutput:!0}),value:e.value,disabled:!0})},`${e.displayName}${t}${W.name}`))}),(0,p.jsxs)(_,{children:[q&&Z.length>0&&(0,p.jsx)(v,{color:b,onClick:()=>Q(W),fullwidth:!0,children:(0,s.translateRaw)("ACTION_16")}),!q&&(0,p.jsxs)(j,{children:[(0,p.jsx)(S,{}),(0,c.isPayable)(W)&&(0,p.jsx)(w,{children:(0,p.jsx)(o.InputField,{label:(0,s.translateRaw)("VALUE"),value:W.payAmount,onChange:({target:{value:e}})=>M(g(g({},W),{},{payAmount:e})),validate:Y})}),(0,p.jsx)(u.default,{account:n,network:r,handleAccountSelected:R,handleSubmit:async e=>{if(!e)return;U(void 0);try{G(!0),await E(e)}catch(e){U(e.reason?e.reason:e.message)}finally{G(!1)}},currentFunction:W,handleGasSelectorChange:P,handleGasLimitChange:D,handleNonceChange:F,estimateGasCallProps:H,nonce:f,gasLimit:m,gasPrice:h,maxFeePerGas:y,maxPriorityFeePerGas:C})]})]}),(0,p.jsx)(T,{children:L&&(0,p.jsx)(o.Spinner,{size:2})}),B&&(0,p.jsx)(N,{children:(0,s.default)("GAS_LIMIT_ESTIMATION_ERROR_MESSAGE",{$error:B})})]})})]})};var a=n(0),r=m(n(6)),o=n(14),i=n(7),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(9)),c=n(2719),l=n(2771),d=m(n(2776)),u=m(n(2777)),p=n(4);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{GREY_LIGHTER:C,WHITE:b}=i.COLORS,O=r.default.div.withConfig({displayName:"GeneratedInteractionForm__DropdownWrapper",componentId:"khd3wn-0"})(["display:flex;flex-direction:column;margin-bottom:15px;"]),w=r.default.div.withConfig({displayName:"GeneratedInteractionForm__FieldWrapper",componentId:"khd3wn-1"})(["display:flex;flex-direction:column;padding-left:",";flex:1;p{font-size:1em;}"],e=>e.isOutput?"30px":0),x=(0,r.default)(o.Typography).withConfig({displayName:"GeneratedInteractionForm__Label",componentId:"khd3wn-2"})(["line-height:1;margin-bottom:9px;font-weight:bold;"]),_=r.default.div.withConfig({displayName:"GeneratedInteractionForm__ActionWrapper",componentId:"khd3wn-3"})(["display:flex;width:100%;justify-content:left;"]),T=r.default.div.withConfig({displayName:"GeneratedInteractionForm__SpinnerWrapper",componentId:"khd3wn-4"})(["display:flex;justify-content:center;"]),I=r.default.div.withConfig({displayName:"GeneratedInteractionForm__FormFieldsWrapper",componentId:"khd3wn-5"})(["input{font-family:",";:disabled{background-color:",";}}"],i.monospace,C),S=r.default.div.withConfig({displayName:"GeneratedInteractionForm__HorizontalLine",componentId:"khd3wn-6"})(["height:1px;color:#000;background-color:",";width:100%;margin:20px 0;"],C),v=(0,r.default)(o.Button).withConfig({displayName:"GeneratedInteractionForm__ActionButton",componentId:"khd3wn-7"})(["margin-top:18px;"]),j=r.default.div.withConfig({displayName:"GeneratedInteractionForm__WriteFormWrapper",componentId:"khd3wn-8"})(["display:flex;flex-direction:column;width:100%;"]),N=(0,r.default)(o.InlineMessage).withConfig({displayName:"GeneratedInteractionForm__ErrorMessage",componentId:"khd3wn-9"})(["padding-top:",";"],i.SPACING.XS)},2770:function(e,t,n){"use strict";let a,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.StateMutabilityType=t.ABIFieldType=t.ABIItemType=void 0,t.ABIItemType=a,function(e){e.FUNCTION="function",e.EVENT="event",e.CONSTRUCTOR="constructor"}(a||(t.ABIItemType=a={})),t.ABIFieldType=r,function(e){e.STRING="string",e.BOOL="bool",e.UINT8="uint8",e.UINT256="uint256",e.ADDRESS="address"}(r||(t.ABIFieldType=r={})),t.StateMutabilityType=o,function(e){e.PURE="pure ",e.VIEW="view",e.NONPAYABLE="nonpayable",e.PAYABLE="payable"}(o||(t.StateMutabilityType=o={}))},2771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FieldLabel",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BooleanOutputField",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"BooleanSelector",{enumerable:!0,get:function(){return o.default}});var a=i(n(2720)),r=i(n(2772)),o=i(n(2775));function i(e){return e&&e.__esModule?e:{default:e}}},2772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fieldName:t,fieldType:n,fieldValue:a}=e,i="true"===a||!0===a;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.default,{fieldName:t,fieldType:n,isOutput:!0}),(0,c.jsxs)(d,{children:[(0,c.jsx)(p,{src:i?r.default:o.default,isTrue:i}),(0,c.jsx)(u,{children:i?"TRUE":"FALSE"})]})]})};var a=l(n(6)),r=l(n(2773)),o=l(n(2774)),i=n(14),s=l(n(2720)),c=n(4);function l(e){return e&&e.__esModule?e:{default:e}}const d=a.default.div.withConfig({displayName:"BooleanOutputField__Wrapper",componentId:"sc-1u0hu8w-0"})(["display:flex;align-items:center;height:65px;"]),u=(0,a.default)(i.Typography).withConfig({displayName:"BooleanOutputField__LabelWrapper",componentId:"sc-1u0hu8w-1"})(["margin-left:4px;opacity:0.9;"]),p=a.default.img.withConfig({displayName:"BooleanOutputField__Icon",componentId:"sc-1u0hu8w-2"})(["filter:",";"],e=>e.isTrue?"invert(0.5) sepia(1) saturate(4) hue-rotate(70deg)":"invert(0.5) sepia(1) saturate(3) hue-rotate(315deg)")},2773:function(e,t,n){"use strict";n.r(t),t.default=n.p+"src/assets/checkmark_outline.ed81286862603f8eafedb85ee9c152c5.svg"},2774:function(e,t,n){"use strict";n.r(t),t.default=n.p+"src/assets/cross_outline.476e84f5690192244c81d8de2cfde56f.svg"},2775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{fieldName:t,fieldType:n,fieldDisplayName:a,value:c,handleInputChange:p}=e,f=[{label:"true",name:"true",value:!0},{label:"false",name:"false",value:!1}];return(0,s.jsxs)(l,{children:[(0,s.jsx)(i.default,{fieldName:a,fieldType:n}),(0,s.jsx)(d,{children:(0,s.jsx)(r.Selector,{value:f.find(e=>e.value===c),options:f,onChange:e=>p(t,e.value),optionComponent:({data:e,selectOption:t})=>(0,s.jsx)(u,{option:e,onSelect:t,paddingLeft:o.SPACING.SM}),valueComponent:({value:e})=>(0,s.jsx)(u,{option:e}),searchable:!0})})]})};var a=c(n(6)),r=n(14),o=n(7),i=c(n(2720)),s=n(4);function c(e){return e&&e.__esModule?e:{default:e}}const l=a.default.div.withConfig({displayName:"BooleanSelector__Wrapper",componentId:"sc-9i100h-0"})(["display:flex;flex-direction:column;width:100%;"]),d=a.default.div.withConfig({displayName:"BooleanSelector__DropdownWrapper",componentId:"sc-9i100h-1"})(["margin-top:8px;margin-bottom:15px;"]),u=({option:e,paddingLeft:t="0",onSelect:n})=>(0,s.jsx)("div",{style:{padding:"12px 15px 12px "+t},onClick:()=>n&&n(e),children:e.name})},2776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{option:t,onSelect:n}=e,a=(0,s.isReadOperation)(t);return(0,c.jsxs)(l,{paddingLeft:e.paddingLeft,onClick:()=>n?n(t):void 0,isSelectable:!!n,children:[t.name,(0,c.jsx)(d,{isRead:a,children:a?(0,i.translateRaw)("READ").toUpperCase():(0,i.translateRaw)("WRITE").toUpperCase()})]})};var a,r=(a=n(6))&&a.__esModule?a:{default:a},o=n(7),i=n(9),s=n(2719),c=n(4);const l=r.default.div.withConfig({displayName:"FunctionDropdownItem__OptionWrapper",componentId:"cl6t9h-0"})(["display:flex;justify-content:space-between;padding:12px 15px 12px 0px;",""],({isSelectable:e,paddingLeft:t="0"})=>`\n    font-weight: ${e?"default":"bold"};\n    padding-left: ${t};\n  `),d=r.default.div.withConfig({displayName:"FunctionDropdownItem__Sticker",componentId:"cl6t9h-1"})(["background-color:",";border-radius:28px;color:",";padding:2px 8px 2px 8px;font-size:0.7em;font-weight:bold;display:flex;align-items:center;justify-content:center;width:50px;opacity:0.95;"],e=>e.isRead?o.COLORS.SUCCESS_GREEN:o.COLORS.BLUE_BRIGHT,o.COLORS.WHITE)},2777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WriteForm=void 0;var a,r=n(96),o=(a=n(6))&&a.__esModule?a:{default:a},i=n(14),s=n(25),c=n(9),l=n(8),d=n(19),u=n(4);const p=o.default.div.withConfig({displayName:"WriteForm__WriteActionWrapper",componentId:"sc-1o68sdp-0"})(["display:flex;flex-direction:column;width:100%;"]),f=o.default.div.withConfig({displayName:"WriteForm__AccountSelectorWrapper",componentId:"sc-1o68sdp-1"})(["margin-top:8px;"]),m=(0,o.default)(i.Button).withConfig({displayName:"WriteForm__ActionButton",componentId:"sc-1o68sdp-2"})(["margin-top:18px;"]),h=(0,o.default)(i.Typography).withConfig({displayName:"WriteForm__CustomLabel",componentId:"sc-1o68sdp-3"})(["font-size:1em;"]),g=e=>{const{account:t,network:n,currentFunction:a,gasLimit:r,gasPrice:o,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:C,estimateGasCallProps:b,handleAccountSelected:O,handleSubmit:w,handleGasSelectorChange:x,handleGasLimitChange:_,handleNonceChange:T,isDemoMode:I}=e,S=(0,s.useSelector)(s.getStoreAccounts),v=(0,d.pipe)(e=>(0,l.getAccountsByNetwork)(e,n.id),e=>(0,l.getAccountsByViewOnly)(e,!1))(S);return(0,u.jsxs)(p,{children:[I&&(0,u.jsx)(i.DemoGatewayBanner,{}),(0,u.jsx)(h,{children:(0,c.translateRaw)("ACCOUNT")}),(0,u.jsxs)(f,{children:[(0,u.jsx)(i.AccountSelector,{name:"account",value:t,accounts:v,onSelect:e=>{O(e)}}),t&&(0,u.jsx)(i.GasSelector,{gasPrice:o,maxFeePerGas:g,maxPriorityFeePerGas:y,gasLimit:r,nonce:C,account:t,setGasPrice:x,setGasLimit:_,setNonce:T,estimateGasCallProps:b,network:n})]}),(0,u.jsx)(m,{disabled:I,onClick:()=>w(a),fullwidth:!0,children:(0,c.translateRaw)("ACTION_17")})]})};t.WriteForm=g;var y=(0,r.connect)(e=>({isDemoMode:(0,s.getIsDemoMode)(e)}))(g);t.default=y},2778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{txReceipt:t,txConfig:n,goToFirstStep:l}=e,d=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,i);return(0,o.jsx)(a.TxReceipt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({txReceipt:t,txConfig:n,completeButton:(0,r.translateRaw)("INTERACT_ANOTHER"),resetFlow:l,onComplete:l},d))};var a=n(658),r=n(9),o=n(4);const i=["txReceipt","txConfig","goToFirstStep"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{goToNextStep:t,txConfig:n}=e;return(0,o.jsx)(a.ConfirmTransaction,{onComplete:t,resetFlow:t,txConfig:n,txType:r.ITxType.CONTRACT_INTERACT})};var a=n(14),r=n(16),o=n(4)},2780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InteractWithContractsFactory=t.interactWithContractsInitialState=void 0;var a,r=n(0),o=(a=n(447))&&a.__esModule?a:{default:a},i=n(11),s=n(95),c=n(33),l=n(1129),d=n(666),u=n(9),p=n(16),f=n(8),m=n(2723),h=n(2719);const g=["gasLimit"];function y(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={network:{},addressOrDomainInput:"",resolvingDomain:!1,contractAddress:"",contract:void 0,customContractName:"",contracts:[],abi:"",showGeneratedForm:!1,submitedFunction:void 0,data:void 0,account:void 0,gasPrice:"0xee6b2800",gasLimit:"21000",nonce:"0",txConfig:void 0,txReceipt:void 0};t.interactWithContractsInitialState=w;t.InteractWithContractsFactory=({state:e,setState:t})=>{const{getContractsByNetwork:n,createContract:a,deleteContract:C}=(0,c.useContracts)(),{getNetworkById:O}=(0,c.useNetworks)(),{addTxToAccount:w}=(0,c.useAccounts)(),x=O(i.DEFAULT_NETWORK),_=()=>{const a=n(e.network.id).map(e=>Object.assign({},e,{label:e.name}));t(e=>b(b({},e),{},{contracts:a}))},T=e=>{let n="",a="",r="";e.address!==m.CUSTOM_CONTRACT_ADDRESS&&e.abi&&(n=e.address,a=e.address,r=e.abi),t(t=>b(b({},t),{},{contract:e,contractAddress:n,addressOrDomainInput:a,abi:r,customContractName:"",resolvingDomain:!1}))},I=(0,r.useCallback)((0,o.default)(e=>S(e),1500),[e.contracts]),S=async n=>{var a;t(e=>b(b({},e),{},{resolvingDomain:!0}));const r=new c.ProviderHandler(x),o=null!=(a=await r.resolveName(n,e.network))?a:i.CREATION_ADDRESS;t(e=>b(b({},e),{},{contractAddress:o,resolvingDomain:!1}));v(o)||j(o)},v=t=>{const n=e.contracts.find(e=>(0,f.isSameAddress)(e.address,t));return!!n&&(T(n),!0)},j=async n=>{const a=await c.EtherscanService.instance.getContractAbi(n,e.network.id);a&&t(e=>b(b({},e),{},{abi:a}))};return{handleNetworkSelected:e=>{t(t=>b(b({},t),{},{account:void 0,network:O(e),contract:void 0,contractAddress:"",addressOrDomainInput:"",abi:"",customContractName:"",resolvingDomain:!1}))},handleAddressOrDomainChanged:n=>{v(n)||""===n||void 0===n||(t(e=>b(b({},e),{},{addressOrDomainInput:n,contractAddress:n,contract:m.customContract,abi:""})),(0,d.getIsValidENSAddressFunction)(e.network.chainId)(n)&&I(n),(0,c.isValidETHAddress)(n)&&j(n))},handleContractSelected:T,handleAbiChanged:e=>{t(t=>b(b({},t),{},{abi:e}))},handleCustomContractNameChanged:e=>{t(t=>b(b({},t),{},{customContractName:e}))},handleSaveContractSubmit:()=>{if(!e.contractAddress||!e.customContractName||!e.abi)throw new Error((0,u.translateRaw)("INTERACT_WRITE_ERROR_MISSING_DATA"));if(!(0,c.isValidETHAddress)(e.contractAddress))throw new Error((0,u.translateRaw)("INTERACT_ERROR_INVALID_ADDRESS"));try{JSON.parse(e.abi)}catch(e){throw new Error("ABI Error: "+e.message)}if(e.contracts.find(t=>t.name===e.customContractName))throw new Error((0,u.translateRaw)("INTERACT_SAVE_ERROR_NAME_EXISTS"));const t=a({abi:e.abi,address:e.contractAddress,name:e.customContractName,label:e.customContractName,networkId:e.network.id,isCustom:!0});_(),T(t)},updateNetworkContractOptions:_,displayGeneratedForm:n=>{if(n){if(!e.contractAddress||!e.abi)throw new Error((0,u.translateRaw)("INTERACT_ERROR_NO_CONTRACT_SELECTED"));if(!(0,c.isValidETHAddress)(e.contractAddress))throw new Error((0,u.translateRaw)("INTERACT_ERROR_INVALID_ADDRESS"));try{JSON.parse(e.abi)}catch(e){throw new Error("ABI Error: "+e.message)}}t(e=>b(b({},e),{},{showGeneratedForm:n}))},handleInteractionFormSubmit:async t=>{const{network:n,contractAddress:a}=e,{encodeInput:r,decodeOutput:o}=new l.AbiFunction(t,[]),i=(0,h.reduceInputParams)(t),s=new c.ProviderHandler(n),d={to:a,data:r(i)};return o(await s.call(d),n.chainId)},handleInteractionFormWriteSubmit:async(n,a)=>{const{contractAddress:r,account:o,nonce:i,gasLimit:l,gasPrice:d,maxFeePerGas:p,maxPriorityFeePerGas:m}=e;if(!o)throw new Error((0,u.translateRaw)("INTERACT_WRITE_ERROR_NO_ACCOUNT"));const{network:C}=o,{value:O,data:w}=(0,h.constructGasCallProps)(r,n,o),x=(0,s.makeTxFromForm)({gasPrice:d,gasLimit:l,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:i,account:o,address:r,network:C},O,w),{gasLimit:_}=x,T=y(x,g);await(0,c.getGasEstimate)(C,T);const I=b(b({},T),{},{gasLimit:(0,f.inputGasLimitToHex)(l)}),S=(0,s.makeBasicTxConfig)(I,o,n.payAmount);t(e=>b(b({},e),{},{txConfig:S})),a()},handleAccountSelected:e=>{t(t=>b(b({},t),{},{account:e}))},handleTxSigned:async(n,a)=>{const{account:r,txConfig:o}=e;if(r)if((0,f.isWeb3Wallet)(r.wallet)){const r=n&&n.hash?n:(0,s.toTxReceipt)(n,p.ITxStatus.PENDING)(p.ITxType.CONTRACT_INTERACT,o);w(e.txConfig.senderAccount,b(b({},r),{},{to:e.txConfig.receiverAddress,from:e.txConfig.senderAccount.address,amount:e.txConfig.amount})),t(e=>b(b({},e),{},{txReceipt:r})),a()}else{new c.ProviderHandler(r.network).sendRawTx(n).then(e=>e.hash).catch(e=>e).then(n=>{const a=(0,s.makePendingTxReceipt)(n)(p.ITxType.CONTRACT_INTERACT,e.txConfig);w(e.txConfig.senderAccount,a),t(e=>b(b({},e),{},{txReceipt:a}))}).finally(a)}},handleGasSelectorChange:e=>{t(t=>b(b({},t),e))},handleDeleteContract:e=>{C(e),_(),T(m.customContract)},handleGasLimitChange:e=>{t(t=>b(b({},t),{},{gasLimit:e}))},handleNonceChange:e=>{t(t=>b(b({},t),{},{nonce:e}))},interactWithContractsState:e}}}}]);
//# sourceMappingURL=InteractWithContractsFlow.92f510178217c8389805.js.map