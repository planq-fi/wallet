(self.webpackJsonp=self.webpackJsonp||[]).push([[3],{2703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(14),r=n(11),o=n(9),i=n(8),c=n(2764),s=n(2766),d=n(4);var l=()=>{const{handleNetworkChanged:e,handleSendClicked:t,handleConfirmClick:n,handleResetFlow:l,broadcastTxState:f}=(0,i.useStateReducer)(s.BroadcastTxConfigFactory,s.broadcastTxInitialState),p=[{label:(0,o.translateRaw)("BROADCAST_TX_TITLE"),component:c.BroadcastTx,props:(({signedTx:t,network:n})=>({signedTx:t,networkId:n,handleNetworkChanged:e}))(f),actions:(e,n)=>t(e,n)},{label:(0,o.translateRaw)("CONFIRM_TX_MODAL_TITLE"),component:a.ConfirmTransaction,props:(({txConfig:e,error:t})=>({txConfig:e,error:t}))(f),actions:(e,t)=>n(t)},{label:(0,o.translateRaw)("BROADCAST_TX_RECEIPT_TITLE"),component:a.TxReceipt,props:(({txConfig:e,txReceipt:t})=>({txConfig:e,txReceipt:t}))(f),actions:e=>l(e)}];return(0,d.jsx)(a.GeneralStepper,{steps:p,defaultBackPath:r.ROUTE_PATHS.DASHBOARD.path,defaultBackPathLabel:(0,o.translateRaw)("DASHBOARD"),completeBtnText:(0,o.translateRaw)("BROADCAST_TX_BROADCAST_ANOTHER")})};t.default=l},2764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BroadcastTx",{enumerable:!0,get:function(){return a.BroadcastTx}});var a=n(2765)},2765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastTx=void 0;var a,r=n(0),o=n(42),i=n(97),c=(a=n(6))&&a.__esModule?a:{default:a},s=n(14),d=n(95),l=n(442),f=n(25),p=n(160),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(9)),x=n(4);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const T=c.default.div.withConfig({displayName:"BroadcastTx__ContentWrapper",componentId:"sc-4hetxy-0"})(["display:flex;flex-direction:column;align-items:center;label{align-self:flex-start;}"]),g=c.default.p.withConfig({displayName:"BroadcastTx__Description",componentId:"sc-4hetxy-1"})(["font-size:18px;line-height:1.5;font-weight:normal;text-align:center;color:",";white-space:pre-line;strong{font-weight:900;}@media (max-width:700px){padding:0 8px;}"],e=>e.theme.text),w=c.default.div.withConfig({displayName:"BroadcastTx__InputWrapper",componentId:"sc-4hetxy-2"})(["margin-top:30px;width:100%;display:flex;align-items:center;"]),b=(0,c.default)(s.Button).withConfig({displayName:"BroadcastTx__SendButton",componentId:"sc-4hetxy-3"})(["width:100%;"]),y=c.default.div.withConfig({displayName:"BroadcastTx__CodeBlockWrapper",componentId:"sc-4hetxy-4"})(["display:flex;width:100%;justify-content:center;overflow-x:auto;"]),_=(0,c.default)(s.Label).withConfig({displayName:"BroadcastTx__StyledLabel",componentId:"sc-4hetxy-5"})(["align-self:flex-start;margin-top:8px;"]),O=c.default.div.withConfig({displayName:"BroadcastTx__NetworkSelectWrapper",componentId:"sc-4hetxy-6"})(["width:100%;"]),C=e=>{try{const t=(0,i.toBuffer)(e);return(0,o.parse)(t)}catch(e){return void console.debug("[BroadcastTx] "+e)}};t.BroadcastTx=({signedTx:e,networkId:t,onComplete:n,handleNetworkChanged:a})=>{const[o,i]=(0,r.useState)(e),[c,h]=(0,r.useState)(""),[m,S]=(0,r.useState)(C(e)),R=(0,f.useSelector)(p.selectNetworks);(0,r.useEffect)(()=>{m&&(0,d.verifyTransaction)(m)?h(""):h((0,u.translateRaw)("BROADCAST_TX_INPUT_ERROR"))},[m]);const j=!m||!m.chainId||(0,l.getNetworkByChainId)(null==m?void 0:m.chainId,R),B=void 0!==m&&0===c.length&&j;return(0,x.jsxs)(T,{children:[(0,x.jsx)(g,{children:(0,u.default)("BROADCAST_TX_DESCRIPTION")}),(0,x.jsxs)(s.Box,{pb:"15px",width:"100%",children:[(0,x.jsx)(w,{children:(0,x.jsx)(s.InputField,{label:(0,u.translateRaw)("SEND_SIGNED"),value:o,textarea:!0,height:"250px",placeholder:"0xf86b0284ee6b2800825208944bbeeb066ed09b7aed07bf39eee0460dfa26152088016345785d8a00008029a03ba7a0cc6d1756cd771f2119cf688b6d4dc9d37096089f0331fe0de0d1cc1254a02f7bcd19854c8d46f8de09e457aec25b127ab4328e1c0d24bfbff8702ee1f474",onChange:({currentTarget:e})=>{const{value:t}=e,n=t.trim();i(t),h(""),S(C(n))},inputError:o.length>0?c:"",marginBottom:"0"})}),!j&&m&&(0,x.jsx)(s.InlineMessage,{children:(0,u.default)("BROADCAST_TX_INVALID_CHAIN_ID",{$chain_id:m.chainId.toString()})})]}),B&&(0,x.jsxs)(r.Fragment,{children:[!m.chainId&&(0,x.jsx)(O,{children:(0,x.jsx)(s.NetworkSelector,{network:t,onChange:a})}),(0,x.jsxs)(_,{children:[(0,u.default)("SEND_RAW"),(0,x.jsx)(s.Tooltip,{tooltip:(0,u.translateRaw)("BROADCAST_TX_RAW_TOOLTIP")})]}),(0,x.jsx)(y,{children:(0,x.jsx)(s.CodeBlock,{children:(v=m,JSON.stringify(v,null,2))})})]}),(0,x.jsx)(b,{disabled:!B,onClick:()=>n(o.trim()),children:(0,u.translateRaw)("SEND_TRANS")})]});var v}},2766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastTxConfigFactory=t.broadcastTxInitialState=void 0;var a=n(11),r=n(95),o=n(76),i=n(43),c=n(25),s=n(16);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={network:a.DEFAULT_NETWORK,txReceipt:void 0,txConfig:void 0,signedTx:"",error:void 0};t.broadcastTxInitialState=p;t.BroadcastTxConfigFactory=({state:e,setState:t})=>{const{networks:n,getNetworkById:a}=(0,i.useNetworks)(),{assets:d}=(0,i.useAssets)(),f=(0,c.useSelector)(c.getStoreAccounts);return{handleNetworkChanged:e=>{t(t=>l(l({},t),{},{network:e}))},handleSendClicked:(a,o)=>{const{network:i}=e,c=(0,r.makeTxConfigFromSignedTx)(a,d,n,f,i);t(e=>l(l({},e),{},{txConfig:c,signedTx:a})),o()},handleConfirmClick:async n=>{try{const{txConfig:i,signedTx:c}=e;if(!i)throw new Error;const d=new o.ProviderHandler(a(i.networkId)),f=await d.sendRawTx(c),p=(0,r.makePendingTxReceipt)(f.hash)(s.ITxType.STANDARD,i);t(e=>l(l({},e),{},{txReceipt:p})),n()}catch(e){console.debug("[BroadcastTx] "+e),t(t=>l(l({},t),{},{error:e.reason?e.reason:e.message}))}},handleResetFlow:e=>{t(p),e()},broadcastTxState:e}}}}]);
//# sourceMappingURL=BroadcastTransactionFlow.0706ae831e4061fc4169.js.map