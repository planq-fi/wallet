(self.webpackJsonp=self.webpackJsonp||[]).push([[15],{2699:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAssets=F,t.default=void 0;var n=s(0),a=s(36),i=s(329),d=s(79),o=w(s(6)),l=s(330),r=w(s(661)),c=w(s(657)),u=s(14),m=s(11),h=s(663),p=s(43),f=s(25),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=A(t);if(s&&s.has(e))return s.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var d=a?Object.getOwnPropertyDescriptor(e,i):null;d&&(d.get||d.set)?Object.defineProperty(n,i,d):n[i]=e[i]}n.default=e,s&&s.set(e,n);return n}(s(9)),R=s(16),x=s(8),_=s(4);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(A=function(e){return e?s:t})(e)}function w(e){return e&&e.__esModule?e:{default:e}}const j=e=>"base"!==e,E=o.default.div.withConfig({displayName:"RequestAssets__QRDisplay",componentId:"sc-1ghgkcc-0"})(["margin:auto;width:60%;"]),b=o.default.label.withConfig({displayName:"RequestAssets__SLabel",componentId:"sc-1ghgkcc-1"})(["margin-bottom:8px;color:#333333;font-weight:normal;"]),y=o.default.fieldset.withConfig({displayName:"RequestAssets__Fieldset",componentId:"sc-1ghgkcc-2"})(["margin-bottom:15px;"]),I=o.default.div.withConfig({displayName:"RequestAssets__AssetFields",componentId:"sc-1ghgkcc-3"})(["margin-bottom:15px;align-items:center;"]),v=o.default.div.withConfig({displayName:"RequestAssets__Divider",componentId:"sc-1ghgkcc-4"})(["height:1px;margin:30px 0;background:#e3edff;"]),O=(0,o.default)(a.Input).withConfig({displayName:"RequestAssets__FullWidthInput",componentId:"sc-1ghgkcc-5"})(["width:100%;"]),S=o.default.div.withConfig({displayName:"RequestAssets__Amount",componentId:"sc-1ghgkcc-6"})(["width:100%;"]),k=o.default.div.withConfig({displayName:"RequestAssets__Asset",componentId:"sc-1ghgkcc-7"})(["margin-top:15px;width:100%;.select-container{transition:box-shadow 0.12s;height:54px;}.is-focused{border:none;outline:none;box-shadow:0 0 0 0.25em rgba(0,122,153,0.65);}.Select-menu-outer{max-height:410px;border:none;box-shadow:0 0 0 0.18em rgba(0,122,153,0.65);.Select-menu{max-height:400px;}}"]),T=o.default.div.withConfig({displayName:"RequestAssets__CodeHeader",componentId:"sc-1ghgkcc-8"})(["display:flex;align-items:center;"]),C=(0,o.default)(a.Heading).withConfig({displayName:"RequestAssets__CodeHeading",componentId:"sc-1ghgkcc-9"})(["margin-top:8px;"]);function F({history:e}){var t;const s=(0,f.useSelector)(f.getStoreAccounts),d=(0,f.useSelector)(f.selectNetworks),o=(0,f.useSelector)((0,f.getDefaultAccount)(!0)),{assets:A}=(0,p.useAssets)(),[w,F]=(0,n.useState)(o.networkId),N=(0,p.getNetworkById)(w,d),P=N?(0,x.filterValidAssets)(A,N.id):[],q=(0,x.sortByTicker)(P),[M,D]=(0,n.useState)(null==(t=q.find(e=>"base"===e.type))?void 0:t.uuid),U=q.find(e=>e.uuid===M);(0,n.useEffect)(()=>{var e;return D(null==(e=q.find(e=>"base"===e.type))?void 0:e.uuid)},[w]);const Q=(0,l.object)().shape({amount:(0,l.number)().min(0,(0,g.translateRaw)("ERROR_0")).required((0,g.translateRaw)("REQUIRED")).typeError((0,g.translateRaw)("ERROR_0")).test((0,h.validateAmountField)())}),B={amount:"",asset:{},recipientAddress:o},H=e=>{let t;if(U){const{decimal:s}=U;isNaN(e)?t=(0,g.translateRaw)("REQUEST_FORM_ERROR_TYPE"):s&&!(0,x.isValidAmount)(s)(e)&&(t=(0,g.translateRaw)("REQUEST_FORM_ERROR_AMOUNT"))}return t};return(0,_.jsxs)(u.ContentPanel,{heading:(0,g.translateRaw)("REQUEST"),icon:c.default,onBack:()=>e.push(m.ROUTE_PATHS.DASHBOARD.path),mobileMaxWidth:"100%;",children:[(0,_.jsx)(i.Formik,{initialValues:B,onSubmit:x.noOp,validationSchema:Q,children:({values:{amount:e,recipientAddress:t},errors:n,touched:d})=>(0,_.jsxs)(i.Form,{children:[(0,_.jsxs)(y,{children:[(0,_.jsx)(b,{htmlFor:"recipientAddress",children:(0,g.default)("X_RECIPIENT")}),(0,_.jsx)(i.Field,{name:"recipientAddress",component:({field:e,form:t})=>(0,_.jsx)(u.AccountSelector,{name:e.name,value:e.value,accounts:s,onSelect:s=>{t.setFieldValue(e.name,s),s.networkId&&F(s.networkId)}})})]}),(0,_.jsxs)(I,{children:[(0,_.jsxs)(S,{children:[(0,_.jsx)(b,{htmlFor:"amount",children:(0,g.default)("X_AMOUNT")}),(0,_.jsx)(i.Field,{name:"amount",validate:H,children:({field:e,form:t})=>(0,_.jsx)(O,{"data-lpignore":"true",value:e.value,onChange:({target:{value:s}})=>{t.setFieldTouched(e.name,!0,!0),t.setFieldValue(e.name,(0,x.sanitizeDecimalSeparator)(s))},placeholder:"0.00",inputMode:"decimal"})})]}),n.amount&&d.amount&&(0,_.jsx)(u.InlineMessage,{children:n.amount}),(0,_.jsxs)(k,{children:[(0,_.jsx)(b,{htmlFor:"asset",children:(0,g.default)("X_ASSET")}),(0,_.jsx)(i.Field,{name:"asset",component:({field:e,form:t})=>(0,_.jsx)(u.AssetSelector,{selectedAsset:U||null,assets:q,showAssetIcon:!1,showAssetName:!0,searchable:!0,onSelect:s=>{t.setFieldValue(e.name,s),s.uuid&&D(s.uuid)}})})]})]}),!n.amount&&U&&t.address&&N&&e.length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v,{}),(0,_.jsxs)(T,{children:[(0,_.jsx)(C,{as:"h3",children:(0,g.translateRaw)("REQUEST_FORM_CODE_HEADER")}),(0,_.jsx)(a.Tooltip,{tooltip:(0,g.default)("REQUEST_FORM_TOOLTIP"),children:(0,_.jsx)("img",{className:"Tool-tip-img",src:r.default})})]}),(0,_.jsxs)(y,{children:[(0,_.jsx)(b,{children:(0,g.default)("REQUEST_QR_CODE")}),(0,_.jsx)(E,{children:(0,_.jsx)(u.QRCode,{data:j(U.type)&&U.contractAddress&&U.decimal?(0,x.buildEIP681TokenRequest)(t.address,U.contractAddress,N.chainId,e,U.decimal):(0,x.buildEIP681EtherRequest)(t.address,N.chainId,e)})})]}),(0,_.jsxs)(y,{children:[(0,_.jsx)(b,{children:(0,g.default)("REQUEST_PAYMENT_CODE")}),(0,_.jsx)(u.CopyableCodeBlock,{children:j(U.type)&&U.contractAddress&&U.decimal?(0,x.buildEIP681TokenRequest)(t.address,U.contractAddress,N.chainId,e,U.decimal):(0,x.buildEIP681EtherRequest)(t.address,N.chainId,e)})]})]})]})}),(0,_.jsx)(u.BusyBottom,{type:R.BusyBottomConfig.SUPPORT})]})}var N=(0,d.withRouter)(F);t.default=N}}]);
//# sourceMappingURL=RequestAssets.d6253d0595c0927656fe.js.map