(self.webpackJsonp=self.webpackJsonp||[]).push([[6],{2705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DeployContractsFlow=void 0;var o,r=n(0),a=n(79),c=(o=n(6))&&o.__esModule?o:{default:o},i=n(14),l=n(11),s=n(25),p=n(7),u=n(9),d=n(8),f=n(2782),y=n(2787),g=n(4);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{SCREEN_XS:C}=p.BREAK_POINTS,b=c.default.div.withConfig({displayName:"DeployContractsFlow__Heading",componentId:"sc-1mwzipc-0"})(["width:100%;display:flex;justify-content:space-between;margin-bottom:10px;align-items:center;@media (max-width:","){flex-direction:column;align-items:stretch;}"],C),x=c.default.div.withConfig({displayName:"DeployContractsFlow__TabsWrapper",componentId:"sc-1mwzipc-1"})(["margin-top:8px;width:fit-content;"]),w=({history:e,location:t})=>{const[n,o]=(0,r.useState)(0),a=(0,s.useSelector)((0,s.getDefaultAccount)()),{handleNetworkSelected:c,handleDeploySubmit:p,handleByteCodeChanged:O,handleAccountSelected:m,handleTxSigned:C,handleGasSelectorChange:w,handleGasLimitChange:T,handleNonceChange:P,deployContractsState:_}=(0,d.useStateReducer)(y.DeployContractsFactory,h(h({},y.deployContractsInitialState),{},{account:a})),{account:j}=_,S=()=>{o(n+1)},v=t=>{e.push(t)},D=[{title:(0,u.translateRaw)("CONTRACTS_INTERACT"),path:l.ROUTE_PATHS.INTERACT_WITH_CONTRACTS.path,onClick:()=>v(l.ROUTE_PATHS.INTERACT_WITH_CONTRACTS.path)},{title:(0,u.translateRaw)("CONTRACTS_DEPLOY"),path:l.ROUTE_PATHS.DEPLOY_CONTRACTS.path,onClick:()=>v(l.ROUTE_PATHS.DEPLOY_CONTRACTS.path)}],R=D.find(e=>e.path===t.pathname),E=[{title:(0,u.translateRaw)("DEPLOY_CONTRACTS"),component:f.Deploy,props:_,actions:{handleByteCodeChanged:O,handleNetworkSelected:c,handleDeploySubmit:()=>p(S),handleAccountSelected:m,handleGasSelectorChange:w,handleNonceChange:P,handleGasLimitChange:T}},{title:(0,u.translateRaw)("CONFIRM_TX_MODAL_TITLE"),component:f.DeployConfirm,props:(({txConfig:e})=>({txConfig:e}))(_),actions:{goToNextStep:S}},{title:(0,u.translateRaw)("DEPLOY_SIGN"),component:j&&i.WALLET_STEPS[j.wallet],props:(({txConfig:e})=>({network:j&&j.network,senderAccount:j,rawTransaction:null==e?void 0:e.rawTransaction}))(_),actions:{onSuccess:e=>C(e,S)}},{title:(0,u.translateRaw)("DEPLOY_RECEIPT"),component:f.DeployReceipt,props:(({txConfig:e,txReceipt:t})=>({txConfig:e,txReceipt:t}))(_),actions:{goToFirstStep:()=>{o(0),c(void 0)}}}],A=E[n],N=A.component,I=A.props,L=A.actions;return(0,g.jsx)(i.ExtendedContentPanel,{onBack:()=>{0===n?e.push(l.ROUTE_PATHS.DASHBOARD.path):o(n-1)},stepper:{current:n+1,total:E.length},width:"750px",heading:(0,g.jsxs)(b,{children:[A.title,(0,g.jsx)(x,{children:(0,g.jsx)(i.Tabs,{tabs:D,selectedIndex:D.findIndex(e=>e.path===R.path)})})]}),children:(0,g.jsx)(N,h(h({},I),L))})};t.DeployContractsFlow=w;var T=(0,a.withRouter)(w);t.default=T},2782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Deploy",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"DeployConfirm",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"DeployReceipt",{enumerable:!0,get:function(){return a.default}});var o=c(n(2783)),r=c(n(2785)),a=c(n(2786));function c(e){return e&&e.__esModule?e:{default:e}}},2783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Deploy=void 0;var o=n(0),r=y(n(447)),a=n(96),c=y(n(6)),i=n(14),l=n(25),s=n(9),p=n(8),u=n(19),d=n(2784),f=n(4);function y(e){return e&&e.__esModule?e:{default:e}}const g=c.default.div.withConfig({displayName:"Deploy__NetworkSelectorWrapper",componentId:"sc-10tuvm2-0"})(["margin-bottom:12px;label{font-weight:normal;}"]),O=c.default.div.withConfig({displayName:"Deploy__FieldWrapper",componentId:"sc-10tuvm2-1"})(["display:flex;flex-direction:column;margin-top:12px;flex:1;p{font-size:1em;}"]),h=c.default.div.withConfig({displayName:"Deploy__InputWrapper",componentId:"sc-10tuvm2-2"})(["width:100%;display:flex;align-items:center;"]),m=c.default.div.withConfig({displayName:"Deploy__ButtonWrapper",componentId:"sc-10tuvm2-3"})(["width:100%;display:flex;justify-content:left;"]),C=c.default.div.withConfig({displayName:"Deploy__MarginWrapper",componentId:"sc-10tuvm2-4"})(["margin-bottom:12px;"]),b=(0,c.default)(i.Typography).withConfig({displayName:"Deploy__CustomLabel",componentId:"sc-10tuvm2-5"})(["font-size:1em;"]),x=e=>{const{networkId:t,byteCode:n,account:a,nonce:c,gasLimit:y,gasPrice:x,maxFeePerGas:w,maxPriorityFeePerGas:T,handleNetworkSelected:P,handleDeploySubmit:_,handleAccountSelected:j,handleNonceChange:S,handleGasLimitChange:v,handleGasSelectorChange:D,handleByteCodeChanged:R,isDemoMode:E}=e,[A,N]=(0,o.useState)(void 0),[I,L]=(0,o.useState)({}),k=(0,l.useSelector)(l.getStoreAccounts),G=(0,l.useSelector)((0,l.selectNetwork)(t)),F=(0,u.pipe)(e=>(0,p.getAccountsByNetwork)(e,t),e=>(0,p.getAccountsByViewOnly)(e,!1))(k);(0,o.useEffect)(()=>{a&&M.current(a,n)},[a,n]);const M=(0,o.useRef)((0,r.default)((e,t)=>L((0,d.constructGasCallProps)(t,e)),700));return(0,f.jsxs)("div",{children:[E&&(0,f.jsx)(i.DemoGatewayBanner,{}),(0,f.jsx)(g,{children:(0,f.jsx)(i.NetworkSelector,{network:t,onChange:e=>{P(e)}})}),(0,f.jsx)(O,{children:(0,f.jsx)(h,{children:(0,f.jsx)(i.InputField,{name:"byteCode",label:(0,s.translateRaw)("CONTRACT_BYTECODE"),value:n,placeholder:"0x8f87a973e...",onChange:({target:{value:e}})=>R(e),textarea:!0,resizableTextArea:!0,height:"108px"})})}),(0,f.jsx)(b,{children:(0,s.translateRaw)("ACCOUNT")}),(0,f.jsxs)(C,{children:[(0,f.jsx)(i.AccountSelector,{name:"account",value:a,accounts:F,onSelect:e=>{j(e)}}),a&&(0,f.jsx)(i.GasSelector,{gasPrice:x,gasLimit:y,nonce:c,maxFeePerGas:w,maxPriorityFeePerGas:T,account:a,setGasPrice:D,setGasLimit:v,setNonce:S,estimateGasCallProps:I,network:G})]}),A&&(0,f.jsx)(C,{children:(0,f.jsx)(i.InlineMessage,{children:A})}),(0,f.jsx)(m,{children:(0,f.jsx)(i.Button,{disabled:E,onClick:async()=>{N(void 0);try{await _()}catch(e){N(e.reason?e.reason:e.message)}},fullwidth:!0,children:(0,s.translateRaw)("NAV_DEPLOYCONTRACT")})})]})};t.Deploy=x;var w=(0,a.connect)(e=>({isDemoMode:(0,l.getIsDemoMode)(e)}))(x);t.default=w},2784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constructGasCallProps=void 0;t.constructGasCallProps=(e,t)=>({from:t.address,value:"0x0",data:e})},2785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{goToNextStep:t,txConfig:n}=e;return(0,a.jsx)(o.ConfirmTransaction,{onComplete:t,resetFlow:t,txConfig:n,txType:r.ITxType.DEPLOY_CONTRACT})};var o=n(14),r=n(16),a=n(4)},2786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const{txReceipt:t,txConfig:n,goToFirstStep:s}=e,p=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,c);return(0,a.jsx)(o.TxReceipt,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({txReceipt:t,txConfig:n,completeButton:(0,r.translateRaw)("DEPLOY_ANOTHER"),resetFlow:s,onComplete:s},p))};var o=n(658),r=n(9),a=n(4);const c=["txReceipt","txConfig","goToFirstStep"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeployContractsFactory=t.deployContractsInitialState=void 0;var o=n(188),r=n(11),a=n(95),c=n(33),i=n(9),l=n(16),s=n(8);const p=["gasLimit","to"];function u(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={account:void 0,rawTransaction:{gasPrice:r.GAS_PRICE_GWEI_DEFAULT_HEX,gasLimit:r.GAS_LIMIT_LOWER_BOUND,nonce:r.DEFAULT_NONCE},txConfig:void 0,txReceipt:void 0,byteCode:"",networkId:r.DEFAULT_NETWORK};t.deployContractsInitialState=g;t.DeployContractsFactory=({state:e,setState:t})=>{const{addTxToAccount:n}=(0,c.useAccounts)();return{handleNetworkSelected:e=>{t(t=>f(f({},t),{},{networkId:e,account:void 0,byteCode:""}))},handleByteCodeChanged:e=>{t(t=>f(f({},t),{},{byteCode:e}))},handleDeploySubmit:async n=>{const{account:r,byteCode:l,nonce:d,gasLimit:y,gasPrice:g,maxFeePerGas:O,maxPriorityFeePerGas:h}=e;if(!l||!(0,o.isHexString)(l))throw new Error((0,i.translateRaw)("DEPLOY_ERROR_INVALID_DATA"));if(!r)throw new Error((0,i.translateRaw)("DEPLOY_ERROR_NO_ACCOUNT"));const{network:m}=r,C=(0,a.makeTxFromForm)({gasPrice:g,gasLimit:y,maxFeePerGas:O,maxPriorityFeePerGas:h,nonce:d,account:r,address:"",network:m},"0",l),{gasLimit:b,to:x}=C,w=u(C,p);await(0,c.getGasEstimate)(m,w);const T=f(f({},w),{},{gasLimit:(0,s.inputGasLimitToHex)(y)}),P=(0,a.makeBasicTxConfig)(T,r,"0");t(e=>f(f({},e),{},{rawTransaction:w,txConfig:P})),n()},handleAccountSelected:e=>{t(t=>f(f({},t),{},{account:e}))},handleTxSigned:async(o,r)=>{const{account:i,txConfig:p}=e;if(i)if((0,s.isWeb3Wallet)(i.wallet)){const c=f(f({},o&&o.hash?o:(0,a.toTxReceipt)(o,l.ITxStatus.PENDING)(l.ITxType.DEPLOY_CONTRACT,p)),{},{to:e.txConfig.receiverAddress,from:e.txConfig.senderAccount.address,amount:e.txConfig.amount});n(e.txConfig.senderAccount,c),t(e=>f(f({},e),{},{txReceipt:c})),r()}else{new c.ProviderHandler(i.network).sendRawTx(o).then(o=>{const r=(0,a.makePendingTxReceipt)(o.hash)(l.ITxType.DEPLOY_CONTRACT,p);n(e.txConfig.senderAccount,r),t(e=>f(f({},e),{},{txReceipt:r}))}).finally(r)}},handleGasSelectorChange:e=>{t(t=>f(f({},t),e))},handleNonceChange:e=>{t(t=>f(f({},t),{},{nonce:e}))},handleGasLimitChange:e=>{t(t=>f(f({},t),{},{gasLimit:e}))},deployContractsState:e}}}}]);
//# sourceMappingURL=DeployContractsFlow.97f3289441b1964a407c.js.map